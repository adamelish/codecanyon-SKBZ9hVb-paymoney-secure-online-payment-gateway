"use strict";function restrictNumberToPrefdecimalOnInput(e){var t=$("select#virtualCard").find(":selected").data("type")??"fiat";restrictNumberToPrefdecimal(e,t)}function determineDecimalPoint(){var e=$("select#virtualCard").find(":selected").data("type");"crypto"==e?($(".pFees, .fFees, .total_fees").text(CRYPTODP),$("#amount").attr("placeholder",CRYPTODP)):"fiat"==e&&($(".pFees, .fFees, .total_fees").text(FIATDP),$("#amount").attr("placeholder",FIATDP))}function isNumber(e){var t=(e=e||window.event).which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}if($(".main-containt").find("#topupCreate").length){function e(e){return new Promise(((a,n)=>{let o=$('[name="_token"]').val();$.post(cardWalletUrl,{_token:o,virtualCard:e}).done((e=>{let n="";""!=e.success?(n=`<option value="${e.success}" ${e.success==selectedWallet?"selected":""}>${e.success+" "+wallet}</option>`,null!=e.success&&$("#display_topup_wallet").html(n),$("#topup_wallet").val(e.success),$("#paymentMethodSection").removeClass("d-none"),$("#paymentMethodEmpty").addClass("d-none"),$("#topupCreateSubmitBtn").removeClass("d-none"),t(),a()):($("#display_topup_wallet").val(""),$("#topup_wallet").val(""),$("#percentage_fee").val(0),$("#fixed_fee").val(0),$("#total_fee").val(0),$(".pFees").html("0"),$(".fFees").html("0"),$(".total_fees").html("0.00"),$("#paymentMethodSection").addClass("d-none"),$("#paymentMethodEmpty").removeClass("d-none"),$("#topupCreateSubmitBtn").addClass("d-none"),a())})).fail((e=>{n(e)}))}))}function t(){var e=$('[name="_token"]').val(),t=$("#amount").val().trim(),a=$("#virtualCard").val(),n=$("#topup_wallet").val();""!=t&&$.post({url:feesLimitUrl,dataType:"json",data:{_token:e,amount:t,virtualCard:a,topup_wallet:n}}).done((function(e){if(200==e.success.status)$("#percentage_fee").val(e.success.feesPercentage),$("#fixed_fee").val(e.success.feesFixed),$("#total_fee").val(e.success.totalFees),$(".total_fees").html(e.success.formattedTotalFees),$(".pFees").html(e.success.formattedFeesPercentage),$(".fFees").html(e.success.formattedFeesFixed),$(".amountLimit").text(""),$("#topupCreateSubmitBtn").attr("disabled",!1);else{if(""!=t)return $(".amountLimit").text(e.success.message),$("#topupCreateSubmitBtn").attr("disabled",!0),!1;$(".amountLimit").text(""),$("#topupCreateSubmitBtn").attr("disabled",!1)}}))}$(window).on("load",(function(){determineDecimalPoint();var t=$("#virtualCard").val(),a=$("#display_topup_wallet option:selected").val();$("#topup_wallet").val(a),setTimeout((function(){e(t)}),300)})),$("select").change((function(){lastCurrencyType="undefined"!==$(this).attr("data-old")?$(this).attr("data-old"):"",currentCurrencyType=$("option:selected",this).data("type"),$(this).attr("data-old",currentCurrencyType)})).change(),$(document).on("change","#virtualCard",(function(){lastCurrencyType!==currentCurrencyType&&$("#amount").val(""),$(".amount-limit-error").text(""),determineDecimalPoint(),e($("#virtualCard").val())})),$(document).on("change","#display_topup_wallet",(function(){$("#topup_wallet").val($(this).val())})),$(document).on("change","#topup_wallet",(function(){t()})),$(document).on("input","#amount",$.debounce(1e3,(function(){t()}))),$("#topupCreateForm").on("submit",(function(){$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#topupCreateSubmitBtn").attr("disabled",!0),$("#topupCreateSubmitBtnText").text(submitBtnText)})),$((function(){function e(e){if(!e.id)return e.text;var t=$(e.element).data("icon");return $("<span>"+t+" "+e.text+"</span>")}$("#virtualCard").select2({templateResult:e,templateSelection:e})}))}if($(".main-containt").find("#topupCreateSingle").length){function a(e){return new Promise(((t,a)=>{let o=$('[name="_token"]').val();$.post(cardWalletUrl,{_token:o,virtualCard:e}).done((e=>{let a="";""!=e.success?(a=`<option value="${e.success}" ${e.success==selectedWallet?"selected":""}>${e.success+" "+wallet}</option>`,null!=e.success&&$("#display_topup_wallet").html(a),$("#topup_wallet").val(e.success),$("#paymentMethodSection").removeClass("d-none"),$("#paymentMethodEmpty").addClass("d-none"),$("#topupCreateSubmitBtn").removeClass("d-none"),n(),t()):($("#display_topup_wallet").val(""),$("#topup_wallet").val(""),$("#percentage_fee").val(0),$("#fixed_fee").val(0),$("#total_fee").val(0),$(".pFees").html("0"),$(".fFees").html("0"),$(".total_fees").html("0.00"),$("#paymentMethodSection").addClass("d-none"),$("#paymentMethodEmpty").removeClass("d-none"),$("#topupCreateSubmitBtn").addClass("d-none"),t())})).fail((e=>{a(e)}))}))}var lastCurrencyType,currentCurrencyType;function n(){var e=$('[name="_token"]').val(),t=$("#amount").val().trim(),a=$("#virtualCard").val(),n=$("#topup_wallet").val();""!=t&&$.post({url:feesLimitUrl,dataType:"json",data:{_token:e,amount:t,virtualCard:a,topup_wallet:n}}).done((function(e){if(200==e.success.status)$("#percentage_fee").val(e.success.feesPercentage),$("#fixed_fee").val(e.success.feesFixed),$("#total_fee").val(e.success.totalFees),$(".total_fees").html(e.success.formattedTotalFees),$(".pFees").html(e.success.formattedFeesPercentage),$(".fFees").html(e.success.formattedFeesFixed),$(".amountLimit").text(""),$("#topupCreateSubmitBtn").attr("disabled",!1);else{if(""!=t)return $(".amountLimit").text(e.success.message),$("#topupCreateSubmitBtn").attr("disabled",!0),!1;$(".amountLimit").text(""),$("#topupCreateSubmitBtn").attr("disabled",!1)}}))}$(window).on("load",(function(){determineDecimalPoint();var e=$("#virtualCard").val(),t=$("#display_topup_wallet option:selected").val();$("#topup_wallet").val(t),setTimeout((function(){a(e)}),300)})),$("select").change((function(){lastCurrencyType="undefined"!==$(this).attr("data-old")?$(this).attr("data-old"):"",currentCurrencyType=$("option:selected",this).data("type"),$(this).attr("data-old",currentCurrencyType)})).change(),$(document).on("input","#amount",$.debounce(1e3,(function(){n()}))),$("#topupCreateSingleForm").on("submit",(function(){$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#topupCreateSubmitBtn").attr("disabled",!0),$("#topupCreateSubmitBtnText").text(submitBtnText)}))}$(".main-containt").find("#topupConfirm").length&&$("#topupConfirmForm").on("submit",(function(){$("#topupConfirmBtn").attr("disabled",!0),$("#topupConfirmBackBtn").removeAttr("href"),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#topupConfirmBtnText").text(confirmBtnText),setTimeout((function(){$("#topupConfirmBtn").attr("disabled",!1),$(".spinner").addClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#topupConfirmBtnText").text(pretext)}),5e3)}));