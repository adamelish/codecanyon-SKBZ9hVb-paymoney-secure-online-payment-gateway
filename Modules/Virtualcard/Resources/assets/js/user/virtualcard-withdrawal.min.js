"use strict";function restrictNumberToPrefdecimalOnInput(t){var e=$("select#withdrawalWallet").find(":selected").data("type");restrictNumberToPrefdecimal(t,e)}if($(".main-containt").find("#WithdrawalCreate").length){let t="";function e(t){return new Promise(((e,a)=>{$.ajax({method:"GET",url:getWithdrawalWalletUrl,data:{virtualcardId:t},dataType:"json"}).done((function(t){let a="";$.map(t.wallets,(function(t){a+=`<option value="${t.wallet_id}" ${t.wallet_id==withdrawalWalletId?"selected":""} data-type="${t.type}">${t.code}</option>`})),t.wallets.length>0&&$("#withdrawalWallet").html(a),e(t)})).fail((function(t){const e=JSON.parse(t.responseText).message;Swal.fire(failedText,e,"error").then((t=>{t.isConfirmed&&window.location.reload()})),a(new Error(e))}))}))}function a(t,e,a){$.ajax({method:"POST",url:retrieveFeesLimitUrl,data:{_token:token,userId:userId,virtualcardId:t,requestedFund:e,withdrawalWallet:a},dataType:"json"}).done((function(t){200==t.success.status&&($("#percentage_fee").val(t.success.response.feesPercentage),$("#fixed_fee").val(t.success.response.feesFixed),$("#total_fee").val(t.success.response.totalFees),$(".total_fees").html(t.success.response.formattedTotalFees),$(".pFees").html(t.success.response.formattedFeesPercentage),$(".fFees").html(t.success.response.formattedFeesFixed))}))}function n(t,e,a){$.post({url:checkAmountLimitUrl,dataType:"json",data:{_token:token,userId:userId,virtualcardId:t,requestedFund:e,withdrawalWallet:a}}).done((function(t){200==t.status?($(".amountLimit").text(""),$("#withdrawalButton").attr("disabled",!1)):($(".amountLimit").text(t.message),$("#withdrawalButton").attr("disabled",!0))}))}$((function(){function t(t){if(!t.id)return t.text;var e=$(t.element).data("icon");return $("<span>"+e+" "+t.text+"</span>")}$("#virtualcardId").select2({templateResult:t,templateSelection:t,escapeMarkup:function(t){return t}})})),$("#withdrawalCreateForm").on("submit",(function(){$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalButton").attr("disabled",!0),$("#withdrawalButtonText").text(submitBtnText)})),$("#withdrawalConfirmForm").on("submit",(function(){$("#withdrawalConfirmBtn").attr("disabled",!0),$("#withdrawalConfirmBackBtn").removeAttr("href"),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalConfirmBtnText").text(submitBtnText),setTimeout((function(){$("#withdrawalConfirmBtn").attr("disabled",!1),$(".spinner").addClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalConfirmBtnText").text(submitBtnText)}),300)})),$("#requestedFund").on("input",$.debounce(1e3,(function(){let t=$(this).val().trim(),e=$("#withdrawalWallet").val(),r=$("#virtualcardId").val();(""==t||isNaN(t)||t<=0)&&(t=0),a(r,t,e),n(r,t,e)}))),$(window).on("load",(function(){t=$("#virtualcardId").val(),e(t).then((e=>{let n=$("#requestedFund").val().trim(),r=$("#withdrawalWallet").val();(""==n||isNaN(n)||n<=0)&&(n=0),a(t,n,r)}))})),$("#virtualcardId").on("change",(function(){t=$(this).val(),e(t)}))}if($(".main-containt").find("#WithdrawalCreateSingle").length){function r(t,e,a){$.post({url:checkAmountLimitUrl,dataType:"json",data:{_token:token,userId:userId,virtualcardId:t,requestedFund:e,withdrawalWallet:a}}).done((function(t){200==t.status?($(".amountLimit").text(""),$("#withdrawalButton").attr("disabled",!1)):($(".amountLimit").text(t.message),$("#withdrawalButton").attr("disabled",!0))}))}function i(t){return new Promise(((e,a)=>{$.ajax({method:"GET",url:getWithdrawalWalletUrl,data:{virtualcardId:t},dataType:"json"}).done((function(t){let a="";$.map(t.wallets,(function(t){a+=`<option value="${t.wallet_id}" ${t.wallet_id==withdrawalWalletId?"selected":""} data-type="${t.type}">${t.code}</option>`})),t.wallets.length>0&&$("#withdrawalWallet").html(a),e(t)})).fail((function(t){const e=JSON.parse(t.responseText).message;Swal.fire(failedText,e,"error").then((t=>{t.isConfirmed&&window.location.reload()})),a(new Error(e))}))}))}function s(t,e,a){$.ajax({method:"POST",url:retrieveFeesLimitUrl,data:{_token:token,userId:userId,virtualcardId:t,requestedFund:e,withdrawalWallet:a},dataType:"json"}).done((function(t){200==t.success.status&&($("#percentage_fee").val(t.success.response.feesPercentage),$("#fixed_fee").val(t.success.response.feesFixed),$("#total_fee").val(t.success.response.totalFees),$(".total_fees").html(t.success.response.formattedTotalFees),$(".pFees").html(t.success.response.formattedFeesPercentage),$(".fFees").html(t.success.response.formattedFeesFixed))}))}$(window).on("load",(function(){let t="";t=$("#virtualcardId").val(),i(t).then((e=>{let a=$("#requestedFund").val().trim(),n=$("#withdrawalWallet").val();(""==a||isNaN(a)||a<=0)&&(a=0),s(t,a,n)}))})),$("#requestedFund").on("input",$.debounce(1e3,(function(){let t=$(this).val().trim(),e=$("#withdrawalWallet").val(),a=$("#virtualcardId").val();(""==t||isNaN(t)||t<=0)&&(t=0),s(a,t,e),r(a,t,e)}))),$("#withdrawalCreateSingleForm").on("submit",(function(){$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalButton").attr("disabled",!0),$("#withdrawalButtonText").text(submitBtnText)})),$("#withdrawalConfirmForm").on("submit",(function(){$("#withdrawalConfirmBtn").attr("disabled",!0),$("#withdrawalConfirmBackBtn").removeAttr("href"),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalConfirmBtnText").text(submitBtnText),setTimeout((function(){$("#withdrawalConfirmBtn").attr("disabled",!1),$(".spinner").addClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalConfirmBtnText").text(submitBtnText)}),300)}))}$(".main-containt").find("#WithdrawalConfirm").length&&$("#withdrawalConfirmForm").on("submit",(function(){$("#withdrawalConfirmBtn").attr("disabled",!0),$("#withdrawalConfirmBackBtn").removeAttr("href"),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalConfirmBtnText").text(submitBtnText),setTimeout((function(){$("#withdrawalConfirmBtn").attr("disabled",!1),$(".spinner").addClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#withdrawalConfirmBtnText").text(submitBtnText)}),3e3)}));