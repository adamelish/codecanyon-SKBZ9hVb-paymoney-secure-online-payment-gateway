"use strict";const vErC="error",pErC="has-validation-error",i=document.querySelectorAll(".form-control");function checkValidity(inp,options){var inErr=options.inErr,p=inp.parentNode,err=p.querySelector(".error")||document.createElement("label");if(!inp.validity.valid&&inp.validationMessage){if(err.className=vErC,err.textContent=inp.validationMessage,inErr)inp.validity.valueMissing&&inp.getAttribute("data-value-missing")?(inp.setCustomValidity(inp.getAttribute("data-value-missing")),err.innerHTML=inp.getAttribute("data-value-missing")):inp.validity.typeMismatch&&inp.getAttribute("data-type-mismatch")?(inp.setCustomValidity(inp.getAttribute("data-type-mismatch")),err.innerHTML=inp.getAttribute("data-type-mismatch")):inp.validity.patternMismatch&&inp.getAttribute("data-pattern")?(inp.setCustomValidity(inp.getAttribute("data-pattern")),err.innerHTML=inp.getAttribute("data-pattern")):inp.validity.tooShort&&inp.getAttribute("data-min-length")?(inp.setCustomValidity(inp.getAttribute("data-min-length")),err.innerHTML=inp.getAttribute("data-min-length")):inp.validity.tooLong&&inp.getAttribute("data-max-length")?(inp.setCustomValidity(inp.getAttribute("data-max-length")),err.innerHTML=inp.getAttribute("data-max-length")):inp.validity.stepMismatch&&inp.getAttribute("data-step-mismatch")?(inp.setCustomValidity(inp.getAttribute("data-step-mismatch")),err.innerHTML=inp.getAttribute("data-step-mismatch")):inp.validity.rangeUnderflow&&inp.getAttribute("data-min")?(inp.setCustomValidity(inp.getAttribute("data-min")),err.innerHTML=inp.getAttribute("data-min")):inp.validity.rangeOverflow&&inp.getAttribute("data-max")?(inp.setCustomValidity(inp.getAttribute("data-max")),err.innerHTML=inp.getAttribute("data-max")):inp.validity.badInput&&inp.getAttribute("data-bad-input")?(inp.setCustomValidity(inp.getAttribute("data-bad-input")),err.innerHTML=inp.getAttribute("data-bad-input")):inp.validity.customError&&inp.getAttribute("data-custom-error")&&(inp.setCustomValidity(inp.getAttribute("data-custom-error")),err.innerHTML=inp.getAttribute("data-custom-error")),p.append(inp,err),p.classList.add(pErC);else{var hasAttr=inp.getAttribute("data-related");if(hasAttr){var el=document.getElementById(hasAttr),elP=el.parentNode,elEr=elP.querySelector(".error");el.setCustomValidity(""),elP.classList.remove(pErC),""!=elEr&&elEr.remove()}inp.setCustomValidity(""),p.classList.remove(pErC),err.remove()}"undefined"!=typeof once&&1==once&&(once=!1,$("html, body").animate({scrollTop:$(".error").offset().top},1e3))}else inp.setCustomValidity(""),p.classList.remove(pErC),err.remove()}function validationCheck(ids=[],selector=""){let status=!0;if(0==ids.length&&0==selector.length)return status;if(selector.length){let inputElements;document.querySelectorAll(selector).forEach(element=>{element.addEventListener("input",()=>{const value=element.value.trim(),parentDiv=element.closest("div"),errorElement=parentDiv.querySelector(".error");errorElement&&(""!==value?errorElement.remove():parentDiv.append(errorElement))}),ids.push("#"+element.id)})}for(const key in ids){const $element=$(ids[key]);if(""==$element.val().length)0==$element.siblings(".error").length&&$element.parent().append(`<label class="error">${requiredText}</label>`),status=!1;else if($element.hasClass("validate-date")){const isValidDateResult=isValidDate($element.val(),ids[key]);if(isValidDateResult||(status=!1),isValidDateResult&&$element.hasClass("date-compare")){const isStart=void 0!==$element.data("start"),isEnd=void 0!==$element.data("end");if(isStart){const endDate=$element.closest(".row").find("input[data-end]").val(),startDate=$element.val(),dateCompareResult=dateCompare(startDate,endDate,ids[key]);dateCompareResult||(status=!1)}}}else""==$element.val().length&&(status=!1)}return status}function isValidDate(dateString,datepickerElement){const dateFormats=[{regex:/^\d{4}[-.\/]\d{2}[-.\/]\d{2}$/,format:"yyyy-mm-dd"},{regex:/^\d{2}[-.\/]\d{2}[-.\/]\d{4}$/,format:"dd-mm-yyyy"},{regex:/^\d{2}[-.\/]\d{2}[-.\/]\d{2}$/,format:"mm-dd-yy"},{regex:/^\d{2}[-.\/][A-Za-z]{3}[-.\/]\d{4}$/,format:"dd-MMM-yyyy"},{regex:/^\d{4}[-.\/][A-Za-z]{3}[-.\/]\d{2}$/,format:"yyyy-MMM-dd"},{regex:/^\d{4}[-.\/][A-Za-z]{3}[-.\/]\d{4}$/,format:"yyyy-MMM-yyyy"},{regex:/^\d{2}[-.\/][A-Za-z]{3}[-.\/]\d{2}$/,format:"dd-MMM-yy"},{regex:/^\d{2}[-.\/][A-Za-z]{3}[-.\/]\d{2}$/,format:"MM-MMM-yy"}];let matchedFormat=null;for(let format of dateFormats)if(format.regex.test(dateString)){matchedFormat=format.format;break}return matchedFormat?(clearError(datepickerElement),!0):(showError(datepickerElement,invalidDateMessage),!1)}function dateCompare(startDate,endDate,datepickerElement){const start=parseDate(startDate),end=parseDate(endDate);if(isNaN(start)||isNaN(end))return showError(datepickerElement,invalidDateMessage),!1;let sTimeUTC=start.getTime(),eTimeUTC=end.getTime();return sTimeUTC>eTimeUTC?(showError(datepickerElement,dateCompareMessage),!1):sTimeUTC===eTimeUTC?(showError(datepickerElement,invalidEndDateMessage),!1):(clearError(datepickerElement),!0)}function showError(element,message){const parentDiv=$(element).closest("div");let errorElement=parentDiv.find(".error");errorElement.length?errorElement.text(message):parentDiv.append(`<label class="error">${message}</label>`)}function clearError(element){const parentDiv=$(element).closest("div");parentDiv.find(".error").remove()}function parseDate(dateString){const parsedDate=new Date(dateString);if(!isNaN(parsedDate))return parsedDate;const separators=["-","/","."];let dateParts;if(separators.some(separator=>{if(dateString.includes(separator))return dateParts=dateString.split(separator),!0}),3===dateParts.length){let day,month,year;return isNaN(dateParts[0])?[year,month,day]=handleMonthAbbreviation(dateParts):4===dateParts[0].length?(year=parseInt(dateParts[0],10),month=isNaN(dateParts[1])?getMonthFromAbbreviation(dateParts[1]):parseInt(dateParts[1],10)-1,day=parseInt(dateParts[2],10)):(day=parseInt(dateParts[0],10),month=isNaN(dateParts[1])?getMonthFromAbbreviation(dateParts[1]):parseInt(dateParts[1],10)-1,year=parseInt(dateParts[2],10)),new Date(year,month,day)}return NaN}function getMonthFromAbbreviation(monthString){const months={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};return months[monthString.substring(0,3)]}function handleMonthAbbreviation(dateParts){return 4===dateParts[0].length?[parseInt(dateParts[0],10),getMonthFromAbbreviation(dateParts[1]),parseInt(dateParts[2],10)]:[parseInt(dateParts[2],10),getMonthFromAbbreviation(dateParts[1]),parseInt(dateParts[0],10)]}i.forEach((function(inp){inp.addEventListener("input",(function(){checkValidity(inp,{inErr:!1})})),inp.addEventListener("invalid",(function(e){e.preventDefault(),checkValidity(inp,{inErr:!0})}))})),$(document).on("change",".sl_common_bx, .datepicker",(function(e){this.setCustomValidity(""),""!=$(e.currentTarget).val()?$("#"+$(this).attr("id")).parent("div").find(".error").hide():$("#"+$(this).attr("id")).parent("div").find(".error").show()})),$(".onblur-clear-this-input").on("blur",(function(){const a=document.getElementById(this.id),b=a.closest(".form");if(b)var c=b.querySelector(".onblur-clear-icon");c.style.display=0==document.getElementById(this.id).value.length?"none":"block",c.addEventListener("click",(function(){a.value="",c.style.display="none"}))})),$(".onblur-clear-this-input").on("focus",(function(){const a=document.getElementById(this.id),b=a.closest(".form");if(b)var c=b.querySelector(".onblur-clear-icon");c.style.display="none"})),(()=>{function getAllowedExtensions(input){const attr=input.getAttribute("allowed-extension");return attr?attr.split(",").map(e=>e.trim().toLowerCase()):[]}function showError(input,errorLabel,message){errorLabel.textContent=message,errorLabel.style.display="inline",input.classList.add("has-error")}function hideError(input,errorLabel){errorLabel.textContent="",errorLabel.style.display="none",input.classList.remove("has-error")}function validateFile(input,errorLabel){const file=input.files[0],isRequired=input.hasAttribute("required"),allowedExtensions=getAllowedExtensions(input),missingMsg=input.getAttribute("data-value-missing")||"This file is required.",typeMsg=input.getAttribute("data-error-message")||`Invalid file type. Only ${allowedExtensions.join(", ").toUpperCase()} allowed.`;if(!file)return isRequired?(input.setCustomValidity(missingMsg),showError(input,errorLabel,missingMsg),!1):(input.setCustomValidity(""),hideError(input,errorLabel),!0);const ext=file.name.split(".").pop().toLowerCase();return allowedExtensions.includes(ext)?(input.setCustomValidity(""),hideError(input,errorLabel),!0):(input.setCustomValidity(typeMsg),showError(input,errorLabel,typeMsg),!1)}function initFileValidation(){const fileInputs=document.querySelectorAll('input[type="file"][allowed-extension]');fileInputs.forEach(input=>{let errorLabel=input.nextElementSibling;errorLabel&&errorLabel.classList.contains("error")||(errorLabel=document.createElement("label"),errorLabel.className="error",errorLabel.style.color="red",errorLabel.style.fontSize="14px",errorLabel.style.display="none",input.insertAdjacentElement("afterend",errorLabel)),input.addEventListener("change",()=>{validateFile(input,errorLabel)}),input.addEventListener("invalid",e=>{e.preventDefault(),validateFile(input,errorLabel)});const form=input.form;form&&!form.__fileValidatorAttached&&(form.addEventListener("submit",e=>{let allValid=!0;fileInputs.forEach(fi=>{const el=fi.nextElementSibling;validateFile(fi,el)||(allValid=!1)}),allValid||e.preventDefault()}),form.__fileValidatorAttached=!0)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initFileValidation):initFileValidation()})();