"use strict";function restrictNumberToPrefdecimalOnInput(e){var a=$("#type").val();restrictNumberToPrefdecimal(e,a)}function formatNumberToPrefDecimal(e=0){return e=Math.abs(e).toFixed(decimalFormat)}function getFeesLimitDetails(){var e=$("#currency_id").val(),a=$("#transaction_type").val(),t=$("#defaultCurrency").val(),r=ADMIN_URL+"/settings/get-feeslimit-details";$.ajax({url:r,type:"post",data:{currency_id:e,transaction_type:a,_token:csrfToken},dataType:"json",success:function(e){200==e.status?(1==t?($(".defaultCurrencyDiv").show(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").text(defaultCurrencyActive),$(".has_transaction").prop("checked",!0).prop("disabled",!0).val("Yes"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!1)):($(".defaultCurrencyDiv").hide(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").text(""),$("#has_transaction").prop("checked",!1).removeAttr("disabled"),$(".has_transaction").val("No"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0)),"Yes"==e.feeslimit.has_transaction?($(".has_transaction").prop("checked",!0),$(".has_transaction").val(e.feeslimit.has_transaction),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!1)):($("#has_transaction").prop("checked",!1),$(".has_transaction").val("No"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0)),$("#id").val(e.feeslimit.id),$(".min_limit").val(formatNumberToPrefDecimal(e.feeslimit.min_limit)),null!=e.feeslimit.max_limit?$(".max_limit").val(formatNumberToPrefDecimal(e.feeslimit.max_limit)):$(".max_limit").val(""),$(".charge_percentage").val(formatNumberToPrefDecimal(e.feeslimit.charge_percentage)),$(".charge_fixed").val(formatNumberToPrefDecimal(e.feeslimit.charge_fixed)),$("#processing_time").val(e.feeslimit.processing_time)):(1==t?($(".defaultCurrencyDiv").show(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").text(defaultCurrencyActive),$(".has_transaction").prop("checked",!0).val("Yes")):($(".defaultCurrencyDiv").hide(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").text(""),$("#has_transaction").removeAttr("disabled"),$(".has_transaction").prop("checked",!1).val("No")),$("#id").val(""),$(".min_limit").val(formatNumberToPrefDecimal("1.00000000")),$(".max_limit").val(""),$(".charge_percentage").val(formatNumberToPrefDecimal("0.00000000")),$(".charge_fixed").val(formatNumberToPrefDecimal("0.00000000")),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0))},error:function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error")}})}function getSpecificCurrencyDetails(){var e=$("#currency_id").val(),a=$("#defaultCurrency").val(),t=$("#transaction_type").val(),r=ADMIN_URL+"/settings/get-specific-currency-details";$.ajax({url:r,type:"post",data:{currency_id:e,transaction_type:t,_token:csrfToken},dataType:"json",success:function(e){200==e.status?(1==a?($(".defaultCurrencyDiv").show(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").text(defaultCurrencyActive),$(".has_transaction").prop("checked",!0),$("#has_transaction").attr("disabled",!0).val("Yes"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!1)):($(".defaultCurrencyDiv").hide(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").hide(),$("#has_transaction").prop("checked",!1).removeAttr("disabled"),$(".has_transaction").val("No"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0)),"Yes"==e.feeslimit.has_transaction?($(".has_transaction").prop("checked",!0),$(".has_transaction").val("Yes"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!1)):($("#has_transaction").prop("checked",!1),$(".has_transaction").val("No"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0)),$("#id").val(e.feeslimit.id),$(".currencyName").text(e.currency.name),$("#currency_id").val(e.currency.id),$(".min_limit").val(formatNumberToPrefDecimal(e.feeslimit.min_limit)),null!=e.feeslimit.max_limit?$(".max_limit").val(formatNumberToPrefDecimal(e.feeslimit.max_limit)):$(".max_limit").val(""),$(".charge_percentage").val(formatNumberToPrefDecimal(e.feeslimit.charge_percentage)),$(".charge_fixed").val(formatNumberToPrefDecimal(e.feeslimit.charge_fixed)),$("#processing_time").val(e.feeslimit.processing_time)):(1==a?($(".defaultCurrencyDiv").show(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").text(defaultCurrencyActive),$("#has_transaction").removeAttr("disabled")):($(".defaultCurrencyDiv").hide(),$(".default_currency_label").html(isActivated),$(".default_currency_side_text").text("")),$("#id").val(""),$(".currencyName").text(e.currency.name),$("#currency_id").val(e.currency.id),$(".has_transaction").prop("checked",!1).val("No"),$(".min_limit").val(formatNumberToPrefDecimal(formatNumberToPrefDecimal("1.00000000"))),$(".max_limit").val(""),$(".charge_percentage").val(formatNumberToPrefDecimal("0.00000000")),$(".charge_fixed").val(formatNumberToPrefDecimal("0.00000000")))},error:function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error")}})}1==$("#defaultCurrency").val()?$(".defaultCurrencyDiv").show():$(".defaultCurrencyDiv").hide(),$("#deposit_limit_form").on("submit",function(){$(".fa-spinner").removeClass("d-none"),$("#deposit_limit_update").attr("disabled",!0),$("#deposit_limit_update_text").text(depositLimitUpdateText)}),$("#has_transaction").on("click",function(){0==$(".has_transaction").prop("checked")?($("#has_transaction").val("No"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0)):($("#has_transaction").val("Yes"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!1))}),$(".listItem").on("click",function(){0==$(".has_transaction").prop("checked")?($("#has_transaction").val("No"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0)):($("#has_transaction").val("Yes"),$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!1));var e=$(this).attr("data-rel"),a=$(this).text(),t=$(this).attr("data-default");1==t?$(".defaultCurrencyDiv").show():$(".defaultCurrencyDiv").hide(),localStorage.setItem("currencyId",e),localStorage.setItem("currencyName",a),localStorage.setItem("defaultCurrency",t),$(".currencyName").text(a),$("#currency_id").val(e),$("#defaultCurrency").val(t),getFeesLimitDetails()}),$(window).on("load",function(){document.referrer==ADMIN_URL+"/settings/currency"?(localStorage.removeItem("currencyId"),localStorage.removeItem("currencyName"),localStorage.removeItem("defaultCurrency")):localStorage.getItem("currencyName")&&localStorage.getItem("currencyId")&&localStorage.getItem("defaultCurrency")?($(".currencyName").text(localStorage.getItem("currencyName")),$("#currency_id").val(localStorage.getItem("currencyId")),$("#defaultCurrency").val(localStorage.getItem("defaultCurrency")),getFeesLimitDetails()):getSpecificCurrencyDetails(),0==$(".has_transaction").prop("checked")&&$("#min_limit, #max_limit, #charge_percentage, #charge_fixed").prop("readonly",!0)});
